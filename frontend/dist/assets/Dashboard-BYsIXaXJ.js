import{b as O,e as k,d as _,r as n,f as h,j as e,O as A,L as l}from"./index-BxsvggaG.js";import{a as d}from"./Skeleton-BiEkAveh.js";function D(){var x;const{user:R}=O(),p=k(),g=_(),[t,b]=n.useState(null),[i,j]=n.useState({}),[o,N]=n.useState([]),[u,y]=n.useState(!0);n.useEffect(()=>{f()},[]);const f=async()=>{var s,a;try{const r=await h.get("/api/v1/stores/my-store");b(r.data.store);const c=await h.get("/api/v1/orders/seller?limit=5"),m=c.data.orders||[];j({totalOrders:((s=c.data.pagination)==null?void 0:s.total)||0,pendingOrders:m.filter(S=>S.status==="awaiting_approval").length||0}),N(m.slice(0,5))}catch(r){((a=r.response)==null?void 0:a.status)===404&&g("/become-seller")}finally{y(!1)}},v=s=>{const a={pending_payment:{bg:"bg-gray-100",text:"text-gray-700",label:"Pending Payment"},awaiting_approval:{bg:"bg-yellow-100",text:"text-yellow-700",label:"Awaiting Approval"},approved:{bg:"bg-green-100",text:"text-green-700",label:"Approved"},rejected:{bg:"bg-red-100",text:"text-red-700",label:"Rejected"},completed:{bg:"bg-blue-100",text:"text-blue-700",label:"Completed"},cancelled:{bg:"bg-gray-100",text:"text-gray-700",label:"Cancelled"}};return a[s]||a.pending_payment},w=p.pathname==="/seller";return u?e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(d,{className:"h-32 w-full rounded-2xl"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(d,{className:"h-24 rounded-xl"}),e.jsx(d,{className:"h-24 rounded-xl"})]})]}):w?e.jsxs("div",{className:"p-4 space-y-6 pb-8",children:[e.jsxs("div",{className:"card bg-gradient-to-br from-primary-500 to-accent-500 text-white",children:[e.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Welcome back! ðŸ‘‹"}),e.jsx("p",{className:"text-white/80 text-sm",children:(t==null?void 0:t.name)||"Your Store"}),e.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Rating"}),e.jsxs("p",{className:"font-semibold flex items-center gap-1",children:[e.jsx("span",{className:"text-yellow-300",children:"â­"}),((x=t==null?void 0:t.rating)==null?void 0:x.toFixed(1))||"0.0"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Total Orders"}),e.jsx("p",{className:"font-semibold",children:(t==null?void 0:t.total_orders)||0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"ðŸ“¦"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalOrders}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Orders"})]}),e.jsxs(l,{to:"/seller/orders?status=awaiting_approval",className:"card text-center hover:shadow-md transition-shadow",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"â³"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:i.pendingOrders}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pending Approval"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(l,{to:"/seller/products/new",className:"card text-center hover:shadow-md transition-shadow",children:[e.jsx("span",{className:"text-2xl mb-2 block",children:"âž•"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Add Product"})]}),e.jsxs(l,{to:"/seller/products",className:"card text-center hover:shadow-md transition-shadow",children:[e.jsx("span",{className:"text-2xl mb-2 block",children:"ðŸ“‹"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"My Products"})]}),e.jsxs(l,{to:"/seller/orders",className:"card text-center hover:shadow-md transition-shadow",children:[e.jsx("span",{className:"text-2xl mb-2 block",children:"ðŸ›’"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Orders"})]}),e.jsxs(l,{to:"/seller/store",className:"card text-center hover:shadow-md transition-shadow",children:[e.jsx("span",{className:"text-2xl mb-2 block",children:"âš™ï¸"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Store Settings"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Orders"}),e.jsx(l,{to:"/seller/orders",className:"text-primary-600 text-sm",children:"View All"})]}),o.length>0?e.jsx("div",{className:"space-y-3",children:o.map(s=>{var r,c;const a=v(s.status);return e.jsx(l,{to:`/order/${s.id}`,className:"card hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"font-medium text-gray-900 truncate",children:[(r=s.buyer)==null?void 0:r.first_name," ",(c=s.buyer)==null?void 0:c.last_name]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Order #",s.order_number]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["â‚¦",parseFloat(s.total_price).toLocaleString()]}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${a.bg} ${a.text}`,children:a.label})]})]})},s.id)})}):e.jsxs("div",{className:"card text-center py-8",children:[e.jsx("span",{className:"text-4xl block mb-2",children:"ðŸ“Š"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No orders yet"})]})]})]}):e.jsx(A,{})}export{D as default};
