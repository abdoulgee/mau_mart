import{r as c,d as N,f as u,j as s}from"./index-BxsvggaG.js";import{H as v}from"./Header-DUNe79n9.js";import{a as l}from"./Skeleton-BiEkAveh.js";function R(){const[n,i]=c.useState([]),[h,p]=c.useState(!0),o=N();c.useEffect(()=>{f()},[]);const f=async()=>{try{const e=await u.get("/api/v1/reviews/my");i(e.data.reviews||[])}catch(e){console.error("Failed to fetch reviews:",e)}finally{p(!1)}},g=async e=>{if(confirm("Are you sure you want to delete this review?"))try{await u.delete(`/api/v1/reviews/${e}`),i(t=>t.filter(a=>a.id!==e))}catch(t){console.error("Failed to delete review:",t)}},y=e=>Array.from({length:5}).map((t,a)=>s.jsx("span",{className:`text-lg ${a<e?"text-yellow-400":"text-gray-300"}`,children:"â˜…"},a)),j=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[s.jsx(v,{title:"My Reviews",showBack:!0}),s.jsx("div",{className:"p-4 space-y-4",children:h?Array.from({length:3}).map((e,t)=>s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(l,{className:"w-16 h-16 rounded-lg flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(l,{className:"h-4 w-32 mb-2"}),s.jsx(l,{className:"h-4 w-24 mb-2"}),s.jsx(l,{className:"h-4 w-full"})]})]})},t)):n.length>0?n.map(e=>{var t,a,d,m,x;return s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-100 overflow-hidden flex-shrink-0 cursor-pointer",onClick:()=>{var r;return o(`/product/${((r=e.product)==null?void 0:r.slug)||e.product_id}`)},children:(d=(a=(t=e.product)==null?void 0:t.media)==null?void 0:a[0])!=null&&d.url?s.jsx("img",{src:e.product.media[0].url,alt:((m=e.product)==null?void 0:m.title)||"Product",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl text-gray-400",children:"ğŸ“¦"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium text-gray-900 text-sm truncate cursor-pointer hover:text-blue-600",onClick:()=>{var r;return o(`/product/${((r=e.product)==null?void 0:r.slug)||e.product_id}`)},children:((x=e.product)==null?void 0:x.title)||"Product"}),s.jsxs("div",{className:"flex items-center gap-1 my-1",children:[y(e.rating),s.jsx("span",{className:"text-xs text-gray-400 ml-1",children:j(e.created_at)})]}),e.comment&&s.jsx("p",{className:"text-gray-600 text-sm line-clamp-3",children:e.comment}),e.is_verified_purchase&&s.jsx("span",{className:"inline-block mt-1 text-xs px-2 py-0.5 bg-green-100 text-green-600 rounded-full",children:"Verified Purchase"})]}),s.jsx("button",{onClick:()=>g(e.id),className:"text-gray-400 hover:text-red-500 transition-colors flex-shrink-0 self-start",title:"Delete review",children:"ğŸ—‘ï¸"})]})},e.id)}):s.jsxs("div",{className:"card text-center py-12",children:[s.jsx("span",{className:"text-5xl block mb-4",children:"â­"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Your Reviews"}),s.jsx("p",{className:"text-gray-500",children:"Reviews you've written will appear here"})]})})]})}export{R as default};
