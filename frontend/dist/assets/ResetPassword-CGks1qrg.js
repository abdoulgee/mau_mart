import{r as a,b as S,c as R,d as A,e as D,j as e,L as B}from"./index-BxsvggaG.js";function z(){var w;const[l,p]=a.useState(["","","","","",""]),[o,g]=a.useState(""),[c,y]=a.useState(""),[i,b]=a.useState(!1),u=a.useRef([]),{pendingVerificationEmail:N,resetPassword:v,isLoading:x,error:f,clearError:m}=S(),n=R(),h=A(),k=D(),d=N||((w=k.state)==null?void 0:w.email);a.useEffect(()=>{d||h("/forgot-password")},[d,h]);const P=(s,t)=>{var j;if(m(),t&&!/^\d$/.test(t))return;const r=[...l];r[s]=t,p(r),t&&s<5&&((j=u.current[s+1])==null||j.focus())},C=(s,t)=>{var r;t.key==="Backspace"&&!l[s]&&s>0&&((r=u.current[s-1])==null||r.focus())},L=s=>{s.preventDefault();const t=s.clipboardData.getData("text").slice(0,6);if(/^\d+$/.test(t)){const r=t.split("").concat(Array(6-t.length).fill(""));p(r)}},M=async s=>{s.preventDefault();const t=l.join("");if(t.length!==6){n.error("Please enter the complete 6-digit code");return}if(o.length<8){n.error("Password must be at least 8 characters");return}if(o!==c){n.error("Passwords do not match");return}const r=await v(d,t,o);r.success?(n.success("Password reset successfully!"),h("/login")):n.error(r.error)};return e.jsxs("div",{className:"min-h-screen flex flex-col justify-center py-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-emerald-400 to-emerald-500 rounded-2xl shadow-lg shadow-emerald-500/30 mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reset Password"}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["Enter the code sent to ",e.jsx("span",{className:"font-medium text-gray-700",children:d})]})]}),e.jsx("div",{className:"card p-6 mx-auto w-full max-w-sm",children:e.jsxs("form",{onSubmit:M,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Verification Code"}),e.jsx("div",{className:"flex justify-center gap-2",children:l.map((s,t)=>e.jsx("input",{ref:r=>u.current[t]=r,type:"text",inputMode:"numeric",maxLength:1,value:s,onChange:r=>P(t,r.target.value),onKeyDown:r=>C(t,r),onPaste:L,className:`
                    w-11 h-12 text-center text-lg font-bold rounded-xl border-2 
                    focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500
                    transition-all duration-200 border-gray-200 bg-gray-50
                    ${s?"border-primary-300 bg-primary-50":""}
                  `},t))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"label",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",id:"newPassword",value:o,onChange:s=>{m(),g(s.target.value)},placeholder:"Min 8 characters",className:"input pr-12",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>b(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:i?e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"label",children:"Confirm New Password"}),e.jsx("input",{type:i?"text":"password",id:"confirmPassword",value:c,onChange:s=>{m(),y(s.target.value)},placeholder:"Repeat your password",className:`input ${c&&o!==c?"input-error":""}`,required:!0})]}),f&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-100 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-600",children:f})}),e.jsx("button",{type:"submit",disabled:x,className:"btn-primary w-full py-3.5",children:x?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting..."]}):"Reset Password"})]})}),e.jsx("p",{className:"text-center mt-6 text-gray-600",children:e.jsx(B,{to:"/login",className:"text-primary-600 hover:text-primary-700 font-medium",children:"‚Üê Back to Sign In"})})]})}export{z as default};
