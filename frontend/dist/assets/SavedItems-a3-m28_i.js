import{r as i,b as u,a as p,d as w,f as j,j as s}from"./index-BxsvggaG.js";import{H as y}from"./Header-DUNe79n9.js";import{a as l}from"./Skeleton-BiEkAveh.js";function S(){const[c,n]=i.useState([]),[v,o]=i.useState(!0),{isAuthenticated:m}=u(),{addToast:x}=p(),r=w();i.useEffect(()=>{m?g():o(!1)},[m]);const g=async()=>{try{const a=await j.get("/api/v1/wishlist");n(a.data.items||[])}catch(a){console.error("Failed to fetch saved items:",a)}finally{o(!1)}},N=async a=>{try{await j.delete(`/api/v1/wishlist/${a}`),n(e=>e.filter(t=>t.product_id!==a)),x({type:"success",message:"Removed from saved items"})}catch{x({type:"error",message:"Failed to remove item"})}};return s.jsxs("div",{className:"min-h-screen bg-surface-50 pb-20",children:[s.jsx(y,{title:"Saved Items",showBack:!0}),s.jsx("div",{className:"p-4 space-y-4",children:v?Array.from({length:3}).map((a,e)=>s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(l,{className:"w-20 h-20 rounded-lg flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(l,{className:"h-4 w-32 mb-2"}),s.jsx(l,{className:"h-5 w-24 mb-2"}),s.jsx(l,{className:"h-4 w-20"})]})]})},e)):c.length>0?c.map(a=>{var t,d,h,f;const e=a.product;return s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-20 h-20 rounded-xl bg-surface-100 overflow-hidden flex-shrink-0 cursor-pointer",onClick:()=>r(`/product/${(e==null?void 0:e.slug)||(e==null?void 0:e.id)}`),children:(d=(t=e==null?void 0:e.media)==null?void 0:t[0])!=null&&d.url?s.jsx("img",{src:e.media[0].url,alt:(e==null?void 0:e.title)||"Product",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate cursor-pointer hover:text-primary-600 transition-colors",onClick:()=>r(`/product/${(e==null?void 0:e.slug)||(e==null?void 0:e.id)}`),children:(e==null?void 0:e.title)||"Product"}),s.jsxs("p",{className:"text-primary-600 font-bold mt-1",children:["₦",((h=e==null?void 0:e.price)==null?void 0:h.toLocaleString())||"0"]}),(e==null?void 0:e.compare_price)&&e.compare_price>e.price&&s.jsxs("p",{className:"text-xs text-gray-400 line-through",children:["₦",e.compare_price.toLocaleString()]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-primary-500 text-xs flex items-center gap-0.5",children:[s.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),((f=e==null?void 0:e.rating)==null?void 0:f.toFixed(1))||"0.0"]}),(e==null?void 0:e.store)&&s.jsxs("span",{className:"text-xs text-gray-400",children:["• ",e.store.name]})]}),s.jsx("span",{className:`text-xs ${e!=null&&e.is_in_stock?"text-green-600":"text-red-500"}`,children:e!=null&&e.is_in_stock?"In Stock":"Out of Stock"})]}),s.jsx("button",{onClick:()=>N(a.product_id),className:"text-red-400 hover:text-red-600 transition-colors flex-shrink-0 self-start p-1",title:"Remove from saved",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]})},a.id)}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-surface-100 rounded-2xl flex items-center justify-center",children:s.jsx("svg",{className:"w-10 h-10 text-rose-300",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),s.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2",children:"No saved items"}),s.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Items you save will appear here"}),s.jsx("button",{onClick:()=>r("/"),className:"btn-primary px-6",children:"Browse Products"})]})})]})}export{S as default};
