import{r,a as S,f as i,j as s}from"./index-BxsvggaG.js";import{a as R}from"./Skeleton-BiEkAveh.js";function k(){const[d,j]=r.useState([]),[g,o]=r.useState(!0),[n,f]=r.useState("pending"),{addToast:a}=S(),[w,p]=r.useState(null);r.useEffect(()=>{c()},[n]);const c=async()=>{o(!0);try{const e=await i.get("/api/v1/admin/store-requests",{params:{status:n}});j(e.data.requests||[])}catch{a({type:"error",message:"Failed to fetch store requests"})}finally{o(!1)}},b=async e=>{try{await i.post(`/api/v1/admin/store-requests/${e}/approve`),a({type:"success",message:"Store request approved!"}),c(),p(null)}catch{a({type:"error",message:"Failed to approve request"})}},v=async(e,t)=>{try{await i.post(`/api/v1/admin/store-requests/${e}/reject`,{reason:t}),a({type:"success",message:"Store request rejected"}),c(),p(null)}catch{a({type:"error",message:"Failed to reject request"})}},N=[{id:"pending",label:"Pending"},{id:"approved",label:"Approved"},{id:"rejected",label:"Rejected"}];return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Store Requests"}),s.jsx("div",{className:"flex gap-2 border-b border-gray-200",children:N.map(e=>s.jsx("button",{onClick:()=>f(e.id),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${n===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.label},e.id))}),s.jsx("div",{className:"space-y-4",children:g?Array.from({length:3}).map((e,t)=>s.jsx(R,{className:"h-32 rounded-xl"},t)):d.length>0?d.map(e=>{var t,l,m,x,u,y,h;return s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-400 to-accent-500 flex items-center justify-center text-white font-medium",children:[(l=(t=e.user)==null?void 0:t.first_name)==null?void 0:l[0],(x=(m=e.user)==null?void 0:m.last_name)==null?void 0:x[0]]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:e.store_name}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.status==="pending"?"bg-yellow-100 text-yellow-700":e.status==="approved"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.status})]}),s.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["By: ",(u=e.user)==null?void 0:u.first_name," ",(y=e.user)==null?void 0:y.last_name," (",(h=e.user)==null?void 0:h.email,")"]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.description}),s.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-gray-500",children:[s.jsxs("span",{children:["Type: ",e.store_type]}),s.jsx("span",{children:"â€¢"}),s.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]}),e.status==="pending"&&s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx("button",{onClick:()=>b(e.id),className:"btn-primary text-sm py-2",children:"Approve"}),s.jsx("button",{onClick:()=>v(e.id,"Application rejected"),className:"btn-secondary text-sm py-2",children:"Reject"})]})]})]})},e.id)}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("span",{className:"text-5xl block mb-3",children:"ðŸ“‹"}),s.jsxs("p",{className:"text-gray-500",children:["No ",n," requests"]})]})})]})}export{k as default};
