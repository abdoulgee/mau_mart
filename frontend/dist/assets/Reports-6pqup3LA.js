import{r as l,a as _,f as o,j as e}from"./index-BxsvggaG.js";import{a as k}from"./Skeleton-BiEkAveh.js";const x={product:{icon:"ðŸ“¦",label:"Product"},store:{icon:"ðŸª",label:"Store"},user:{icon:"ðŸ‘¤",label:"User"},review:{icon:"â­",label:"Review"}};function D(){var y,u,b;const[m,f]=l.useState([]),[N,p]=l.useState(!0),[i,v]=l.useState("pending"),[t,n]=l.useState(null),{addToast:r}=_();l.useEffect(()=>{c()},[i]);const c=async()=>{p(!0);try{const s=await o.get("/api/v1/admin/reports",{params:{status:i}});f(s.data.reports||[])}catch{r({type:"error",message:"Failed to load reports"})}finally{p(!1)}},h=async(s,a)=>{try{await o.post(`/api/v1/admin/reports/${s}/resolve`,{action:a}),r({type:"success",message:"Report resolved"}),c(),n(null)}catch{r({type:"error",message:"Failed to resolve report"})}},w=async s=>{try{await o.post(`/api/v1/admin/reports/${s}/dismiss`),r({type:"success",message:"Report dismissed"}),c(),n(null)}catch{r({type:"error",message:"Failed to dismiss report"})}},R=[{id:"pending",label:"Pending"},{id:"resolved",label:"Resolved"},{id:"dismissed",label:"Dismissed"}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports"}),e.jsx("div",{className:"flex gap-2 border-b",children:R.map(s=>e.jsx("button",{onClick:()=>v(s.id),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${i===s.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500"}`,children:s.label},s.id))}),e.jsx("div",{className:"space-y-3",children:N?Array.from({length:3}).map((s,a)=>e.jsx(k,{className:"h-24 rounded-xl"},a)):m.length>0?m.map(s=>{var a,d,g,j;return e.jsx("div",{className:"card",onClick:()=>n(s),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-xl",children:((a=x[s.report_type])==null?void 0:a.icon)||"ðŸš©"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:[((d=x[s.report_type])==null?void 0:d.label)||"Report",": ",s.reported_item_name||`#${s.reported_id}`]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s.status==="pending"?"bg-yellow-100 text-yellow-700":s.status==="resolved"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.status})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.reason}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Reported by: ",(g=s.reporter)==null?void 0:g.first_name," ",(j=s.reporter)==null?void 0:j.last_name," â€¢ ",new Date(s.created_at).toLocaleDateString()]})]})]})},s.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("span",{className:"text-5xl block mb-3",children:"ðŸš©"}),e.jsxs("p",{className:"text-gray-500",children:["No ",i," reports"]})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Report Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Type"}),e.jsx("p",{className:"font-medium",children:(y=x[t.report_type])==null?void 0:y.label})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Reason"}),e.jsx("p",{className:"text-gray-900",children:t.reason})]}),t.description&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:t.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Reporter"}),e.jsxs("p",{className:"font-medium",children:[(u=t.reporter)==null?void 0:u.first_name," ",(b=t.reporter)==null?void 0:b.last_name]})]}),t.status==="pending"&&e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx("button",{onClick:()=>w(t.id),className:"btn-secondary flex-1",children:"Dismiss"}),e.jsx("button",{onClick:()=>h(t.id,"warn"),className:"bg-yellow-500 text-white px-4 py-2 rounded-xl flex-1",children:"Warn"}),e.jsx("button",{onClick:()=>h(t.id,"remove"),className:"bg-red-500 text-white px-4 py-2 rounded-xl flex-1",children:"Remove"})]})]}),e.jsx("button",{onClick:()=>n(null),className:"w-full mt-4 btn-secondary",children:"Close"})]})})]})}export{D as default};
