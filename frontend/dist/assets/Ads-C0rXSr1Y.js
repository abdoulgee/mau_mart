import{r as n,a as D,f as o,j as e,L as U}from"./index-BxsvggaG.js";import{a as w}from"./Skeleton-BiEkAveh.js";const d={home_banner:{icon:"ðŸ ",label:"Home Banner",desc:"Large banner on home page"},category_sidebar:{icon:"ðŸ“‚",label:"Category Sidebar",desc:"Sidebar in category pages"},product_interstitial:{icon:"ðŸ“¦",label:"Product Page",desc:"Between product listings"}},E={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-600"};function B(){var v;const[x,S]=n.useState({}),[g,_]=n.useState([]),[k,L]=n.useState(!0),[C,m]=n.useState(!1),[b,j]=n.useState(!1),[t,i]=n.useState({placement:"home_banner",image_url:"",link_url:"",payment_reference:""}),[y,p]=n.useState(null),[A,f]=n.useState(!1),{addToast:c}=D();n.useEffect(()=>{N()},[]);const N=async()=>{try{const[s,a]=await Promise.all([o.get("/api/v1/subscriptions/ads/placements"),o.get("/api/v1/subscriptions/ads/my-requests")]);S(s.data.placements),_(a.data.requests||[])}catch{c({type:"error",message:"Failed to load data"})}finally{L(!1)}},R=async s=>{var l;const a=(l=s.target.files)==null?void 0:l[0];if(a){if(a.size>2*1024*1024){c({type:"error",message:"Image must be less than 2MB"});return}f(!0);try{const r=new FormData;r.append("file",a);const h=await o.post("/api/v1/uploads/image",r,{headers:{"Content-Type":"multipart/form-data"}});i({...t,image_url:h.data.url}),p(URL.createObjectURL(a)),c({type:"success",message:"Image uploaded"})}catch{c({type:"error",message:"Failed to upload image"})}finally{f(!1)}}},P=async s=>{var a,l;if(s.preventDefault(),!t.image_url||!t.payment_reference){c({type:"error",message:"Please upload an image and enter payment reference"});return}j(!0);try{await o.post("/api/v1/subscriptions/ads/request",t),c({type:"success",message:"Ad request submitted!"}),m(!1),i({placement:"home_banner",image_url:"",link_url:"",payment_reference:""}),p(null),N()}catch(r){c({type:"error",message:((l=(a=r.response)==null?void 0:a.data)==null?void 0:l.message)||"Request failed"})}finally{j(!1)}};if(k)return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4",children:[e.jsx(w,{className:"h-8 w-48 mb-6"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(w,{className:"h-32 rounded-2xl"},s))})]});const u=x[t.placement];return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 px-4 py-3 flex items-center justify-between z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{to:"/seller/subscription",className:"p-2 -ml-2 text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-lg font-semibold",children:"Ad Placements"})]}),e.jsx("button",{onClick:()=>m(!0),className:"btn-primary text-sm py-2 px-4",children:"+ New Ad"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-500 mb-3",children:"AD PLACEMENTS"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.entries(x).map(([s,a])=>{var l,r;return e.jsxs("div",{className:"p-3 bg-white rounded-xl border border-gray-100 text-center",children:[e.jsx("span",{className:"text-2xl",children:(l=d[s])==null?void 0:l.icon}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(r=d[s])==null?void 0:r.label}),e.jsxs("p",{className:"text-sm font-bold text-primary-600",children:["â‚¦",a.price.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[a.duration_days," days"]})]},s)})})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-500 mb-3",children:"MY AD REQUESTS"}),g.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("span",{className:"text-4xl block mb-4",children:"ðŸ“¢"}),e.jsx("p",{children:"No ad requests yet"}),e.jsx("p",{className:"text-sm",children:"Advertise your store on the platform"})]}):e.jsx("div",{className:"space-y-3",children:g.map(s=>{var a,l,r;return e.jsxs("div",{className:"p-4 bg-white rounded-2xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:(a=d[s.placement])==null?void 0:a.icon}),e.jsx("span",{className:"text-sm font-medium",children:(l=d[s.placement])==null?void 0:l.label})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${E[s.status]}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsx("div",{className:"relative rounded-xl overflow-hidden bg-gray-100",children:e.jsx("img",{src:s.image_url,alt:"Ad",className:"w-full h-24 object-cover"})}),e.jsxs("div",{className:"flex justify-between mt-3 text-xs text-gray-500",children:[e.jsxs("span",{children:["â‚¦",(r=s.amount_paid)==null?void 0:r.toLocaleString()]}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]}),s.status==="approved"&&s.expires_at&&e.jsxs("p",{className:"text-xs text-green-600 mt-2",children:["Expires: ",new Date(s.expires_at).toLocaleDateString()]})]},s.id)})})]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end z-50",onClick:()=>m(!1),children:e.jsxs("div",{className:"w-full bg-white rounded-t-3xl p-6 max-h-[85vh] overflow-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Request Ad Placement"}),e.jsx("button",{onClick:()=>m(!1),className:"p-2 text-gray-400",children:"âœ•"})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Placement Type"}),e.jsx("div",{className:"space-y-2",children:Object.entries(d).map(([s,a])=>{var l,r;return e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer ${t.placement===s?"border-primary-500 bg-primary-50":"border-gray-100"}`,children:[e.jsx("input",{type:"radio",name:"placement",value:s,checked:t.placement===s,onChange:h=>i({...t,placement:h.target.value}),className:"hidden"}),e.jsx("span",{className:"text-2xl",children:a.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:a.label}),e.jsx("p",{className:"text-sm text-gray-500",children:a.desc})]}),e.jsxs("span",{className:"font-bold text-primary-600",children:["â‚¦",(r=(l=x[s])==null?void 0:l.price)==null?void 0:r.toLocaleString()]})]},s)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Banner Image"}),e.jsx("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-4 text-center",children:y?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:y,alt:"Preview",className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{p(null),i({...t,image_url:""})},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full text-xs",children:"âœ•"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"}),e.jsx("div",{className:"py-4",children:A?e.jsx("span",{className:"text-gray-500",children:"Uploading..."}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-3xl block mb-2",children:"ðŸ“·"}),e.jsx("span",{className:"text-sm text-primary-600",children:"Click to upload banner"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Recommended: 1200x300px"})]})})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link URL (optional)"}),e.jsx("input",{type:"url",value:t.link_url,onChange:s=>i({...t,link_url:s.target.value}),placeholder:"https://example.com",className:"input"})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-xl",children:[e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Payment Required:"})," Transfer â‚¦",(v=u==null?void 0:u.price)==null?void 0:v.toLocaleString()," to:"]}),e.jsxs("p",{className:"text-sm font-medium mt-2",children:["Bank: GTBank",e.jsx("br",{}),"Account: 0123456789",e.jsx("br",{}),"Name: MAU MART"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Reference"}),e.jsx("input",{type:"text",value:t.payment_reference,onChange:s=>i({...t,payment_reference:s.target.value}),placeholder:"Enter transaction reference",className:"input",required:!0})]}),e.jsx("button",{type:"submit",disabled:b||!t.image_url,className:"btn-primary w-full disabled:opacity-50",children:b?"Submitting...":"Submit Ad Request"})]})]})})]})}export{B as default};
