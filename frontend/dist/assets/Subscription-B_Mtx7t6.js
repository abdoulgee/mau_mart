import{r as i,a as k,b as L,f as n,j as e,L as d}from"./index-BxsvggaG.js";import{a as b}from"./Skeleton-BiEkAveh.js";const h={basic:"üÜì",starter:"üöÄ",professional:"‚≠ê",enterprise:"üëë"},C={basic:"border-gray-200 bg-white",starter:"border-primary-200 bg-primary-50",professional:"border-accent-200 bg-accent-50",enterprise:"border-yellow-300 bg-gradient-to-br from-yellow-50 to-amber-100"};function B(){var m;const[c,g]=i.useState({}),[r,j]=i.useState(null),[l,y]=i.useState(null),[f,N]=i.useState(!0),[v,x]=i.useState(!1),{addToast:a}=k(),{user:P}=L();i.useEffect(()=>{o()},[]);const o=async()=>{try{const[t,s]=await Promise.all([n.get("/api/v1/subscriptions/plans"),n.get("/api/v1/subscriptions/my-subscription")]);g(t.data.plans),j(s.data.plan_key),y(s.data.subscription)}catch{a({type:"error",message:"Failed to load subscription data"})}finally{N(!1)}},w=async t=>{var p,u;if(t===r)return;const s=c[t];if(s.price>0){a({type:"info",message:`To subscribe to ${s.name}, please complete payment of ‚Ç¶${s.price.toLocaleString()} via bank transfer or card`});return}x(!0);try{await n.post("/api/v1/subscriptions/subscribe",{plan:t}),a({type:"success",message:`Subscribed to ${s.name} plan!`}),o()}catch(_){a({type:"error",message:((u=(p=_.response)==null?void 0:p.data)==null?void 0:u.message)||"Failed to subscribe"})}finally{x(!1)}},S=async()=>{if(confirm("Are you sure you want to cancel your subscription?"))try{await n.post("/api/v1/subscriptions/cancel"),a({type:"success",message:"Subscription cancelled"}),o()}catch{a({type:"error",message:"Failed to cancel subscription"})}};return f?e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4",children:[e.jsx(b,{className:"h-8 w-48 mb-6"}),e.jsx("div",{className:"grid gap-4",children:[1,2,3,4].map(t=>e.jsx(b,{className:"h-48 rounded-2xl"},t))})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 px-4 py-3 flex items-center gap-3 z-10",children:[e.jsx(d,{to:"/seller",className:"p-2 -ml-2 text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-lg font-semibold",children:"Subscription Plans"})]}),l&&e.jsxs("div",{className:"mx-4 mt-4 p-4 bg-gradient-to-r from-primary-500 to-accent-500 rounded-2xl text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-80",children:"Current Plan"}),e.jsx("p",{className:"text-xl font-bold",children:((m=c[r])==null?void 0:m.name)||"Basic"})]}),e.jsx("span",{className:"text-4xl",children:h[r]})]}),l.expires_at&&e.jsxs("p",{className:"mt-2 text-sm opacity-80",children:["Expires: ",new Date(l.expires_at).toLocaleDateString()]}),r!=="basic"&&e.jsx("button",{onClick:S,className:"mt-3 text-sm underline opacity-80 hover:opacity-100",children:"Cancel subscription"})]}),e.jsx("div",{className:"p-4 grid gap-4",children:Object.entries(c).map(([t,s])=>e.jsxs("div",{className:`relative rounded-2xl border-2 p-5 transition-all ${C[t]} ${r===t?"ring-2 ring-primary-500":""}`,children:[r===t&&e.jsx("span",{className:"absolute -top-3 left-4 px-3 py-1 bg-primary-500 text-white text-xs font-medium rounded-full",children:"Current Plan"}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-2xl font-bold text-primary-600",children:[s.price===0?"Free":`‚Ç¶${s.price.toLocaleString()}`,s.duration_days>0&&e.jsx("span",{className:"text-sm text-gray-500 font-normal",children:"/month"})]})]}),e.jsx("span",{className:"text-3xl",children:h[t]})]}),e.jsxs("ul",{className:"space-y-2 mb-4",children:[e.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("span",{className:"text-green-500",children:"‚úì"}),s.max_products===-1?"Unlimited":s.max_products," products"]}),e.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("span",{className:s.featured_slots>0?"text-green-500":"text-gray-300",children:s.featured_slots>0?"‚úì":"‚úó"}),s.featured_slots," featured slot",s.featured_slots!==1?"s":""]}),e.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("span",{className:s.analytics?"text-green-500":"text-gray-300",children:s.analytics?"‚úì":"‚úó"}),"Analytics dashboard"]}),e.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("span",{className:s.priority_support?"text-green-500":"text-gray-300",children:s.priority_support?"‚úì":"‚úó"}),"Priority support"]}),e.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("span",{className:s.verified_badge?"text-green-500":"text-gray-300",children:s.verified_badge?"‚úì":"‚úó"}),"Verified badge"]})]}),e.jsx("button",{onClick:()=>w(t),disabled:r===t||v,className:`w-full py-3 rounded-xl font-medium transition-colors ${r===t?"bg-gray-100 text-gray-400 cursor-default":"btn-primary"}`,children:r===t?"Current Plan":s.price===0?"Select Plan":"Subscribe"})]},t))}),e.jsxs("div",{className:"px-4 mt-4 space-y-3",children:[e.jsx(d,{to:"/seller/featured",className:"block p-4 bg-white rounded-2xl border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"‚≠ê"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Featured Listings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Boost your product visibility"})]})]}),e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),e.jsx(d,{to:"/seller/ads",className:"block p-4 bg-white rounded-2xl border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üì¢"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Ad Placements"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Advertise on the platform"})]})]}),e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})}export{B as default};
