import{g as w,h as N,r,f as k,j as e,L as S}from"./index-BxsvggaG.js";import{H as P}from"./Header-DUNe79n9.js";import{P as L}from"./Skeleton-BiEkAveh.js";import{A as C}from"./AdBanner-BeE_QF74.js";const x=[{value:"newest",label:"Newest"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"},{value:"popular",label:"Most Popular"},{value:"rating",label:"Highest Rated"}];function M({product:s}){var l,o;return e.jsx(S,{to:`/product/${s.id}`,className:"group block",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-card-hover hover:-translate-y-0.5 transition-all duration-300",children:[e.jsx("div",{className:"aspect-square relative overflow-hidden",children:(o=(l=s.media)==null?void 0:l[0])!=null&&o.url?e.jsx("img",{src:s.media[0].url,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-surface-100 to-surface-200 flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800 text-sm line-clamp-2 mb-1 leading-tight",children:s.title}),e.jsxs("span",{className:"text-base font-bold text-primary-600",children:["â‚¦",s.price.toLocaleString()]})]})]})})}function _(){var h;const{slug:s}=w(),[l,o]=N(),[a,u]=r.useState(null),[c,g]=r.useState([]),[p,d]=r.useState(!0),[f,B]=r.useState(1),[v,j]=r.useState({}),[m,n]=r.useState(!1),i=l.get("sort")||"newest";r.useEffect(()=>{b()},[s,i]);const b=async()=>{d(!0);try{const t=await k.get(`/api/v1/categories/slug/${s}/products`,{params:{sort:i,page:f,limit:20}});u(t.data.category),g(t.data.products),j(t.data.pagination)}catch(t){console.error("Failed to fetch category products:",t)}finally{d(!1)}},y=t=>{o({sort:t}),n(!1)};return e.jsxs("div",{className:"min-h-screen bg-surface-50",children:[e.jsx(P,{title:(a==null?void 0:a.name)||"Category",showBack:!0}),a&&e.jsxs("div",{className:"bg-gradient-to-br from-primary-500 to-primary-600 px-4 py-6 text-white",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:a.name}),a.description&&e.jsx("p",{className:"text-sm text-white/80",children:a.description}),e.jsxs("p",{className:"text-sm text-white/70 mt-2",children:[v.total||0," products"]})]}),e.jsx("div",{className:"sticky top-14 glass border-b border-surface-200/60 px-4 py-3 flex items-center justify-between z-10",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!m),className:"flex items-center gap-2 text-sm text-gray-600 font-medium",children:[e.jsx("svg",{className:"w-4 h-4 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),"Sort: ",(h=x.find(t=>t.value===i))==null?void 0:h.label]}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>n(!1)}),e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-2xl shadow-elevated border border-surface-200 py-2 z-20 min-w-[180px]",children:x.map(t=>e.jsx("button",{onClick:()=>y(t.value),className:`w-full text-left px-4 py-2.5 text-sm font-medium ${i===t.value?"bg-primary-50 text-primary-600":"text-gray-700 hover:bg-surface-50"}`,children:t.label},t.value))})]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx(C,{position:"category_banner"}),p?e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4,5,6].map(t=>e.jsx(L,{},t))}):c.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-3",children:c.map(t=>e.jsx(M,{product:t},t.id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-surface-100 rounded-2xl flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2",children:"No products yet"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Be the first to list a product in this category!"})]})]})]})}export{_ as default};
