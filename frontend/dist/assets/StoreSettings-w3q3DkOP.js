import{d as _,a as S,r as c,f as p,j as e}from"./index-BxsvggaG.js";import{a as i}from"./Skeleton-BiEkAveh.js";function k(){var x;const b=_(),{addToast:o}=S(),[j,g]=c.useState(!0),[d,m]=c.useState(!1),[r,v]=c.useState(null),[t,u]=c.useState({name:"",description:"",address:"",phone:"",email:"",store_type:"general",bank_name:"",account_number:"",account_name:""});c.useEffect(()=>{h()},[]);const h=async()=>{var s;try{const a=(await p.get("/api/v1/stores/my-store")).data.store;v(a),u({name:a.name||"",description:a.description||"",address:a.address||"",phone:a.phone||"",email:a.email||"",store_type:a.store_type||"general",bank_name:a.bank_name||"",account_number:a.account_number||"",account_name:a.account_name||""})}catch(n){console.error("Failed to fetch store:",n),((s=n.response)==null?void 0:s.status)===404&&b("/become-seller")}finally{g(!1)}},l=s=>{u(n=>({...n,[s.target.name]:s.target.value}))},y=async s=>{var n,a;s.preventDefault(),m(!0);try{await p.put("/api/v1/stores/my-store",t),o({type:"success",message:"Store settings updated successfully"}),h()}catch(f){o({type:"error",message:((a=(n=f.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update store settings"})}finally{m(!1)}};if(j)return e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{className:"h-8 w-48"}),e.jsxs("div",{className:"card space-y-4",children:[e.jsx(i,{className:"h-10 w-full"}),e.jsx(i,{className:"h-32 w-full"}),e.jsx(i,{className:"h-10 w-full"})]})]});const N=[{value:"general",label:"General Store"},{value:"kitchen",label:"Kitchen/Food"},{value:"service",label:"Service Provider"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Store Settings"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your store information"})]}),e.jsxs("form",{onSubmit:y,className:"card space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"label",children:"Store Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:l,className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"store_type",className:"label",children:"Store Type"}),e.jsx("select",{id:"store_type",name:"store_type",value:t.store_type,onChange:l,className:"input",children:N.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"label",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:t.description,onChange:l,rows:4,className:"input",placeholder:"Tell customers about your store..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"label",children:"Address"}),e.jsx("input",{type:"text",id:"address",name:"address",value:t.address,onChange:l,className:"input",placeholder:"Store location"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"label",children:"Phone"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:l,className:"input",placeholder:"Contact number"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:l,className:"input",placeholder:"Store email"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"üí≥ Payment Details"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Buyers will use these details to pay for orders"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"bank_name",className:"label",children:"Bank Name"}),e.jsx("input",{type:"text",id:"bank_name",name:"bank_name",value:t.bank_name,onChange:l,className:"input",placeholder:"e.g., First Bank, GTBank"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"account_number",className:"label",children:"Account Number"}),e.jsx("input",{type:"text",id:"account_number",name:"account_number",value:t.account_number,onChange:l,className:"input",placeholder:"10-digit account number"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"account_name",className:"label",children:"Account Name"}),e.jsx("input",{type:"text",id:"account_name",name:"account_name",value:t.account_name,onChange:l,className:"input",placeholder:"Account holder name"})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"btn-primary w-full",children:d?"Saving...":"Save Changes"})]}),r&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Store Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Rating"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["‚≠ê ",((x=r.rating)==null?void 0:x.toFixed(1))||"0.0"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Orders"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.total_orders||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.is_active?"‚úÖ Active":"‚ùå Inactive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Created"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(r.created_at).toLocaleDateString()})]})]})]})]})}export{k as default};
