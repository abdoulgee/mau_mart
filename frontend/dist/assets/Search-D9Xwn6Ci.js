import{h as j,r as i,j as e,L as x}from"./index-BxsvggaG.js";import{u as v}from"./productStore-CZGEDRsy.js";import{P as y}from"./Skeleton-BiEkAveh.js";import{A as b}from"./AdBanner-BeE_QF74.js";function N({product:r}){var a,t;return e.jsx(x,{to:`/product/${r.id}`,className:"group block",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-card-hover hover:-translate-y-0.5 transition-all duration-300",children:[e.jsx("div",{className:"aspect-square relative overflow-hidden",children:(t=(a=r.media)==null?void 0:a[0])!=null&&t.url?e.jsx("img",{src:r.media[0].url,alt:r.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-surface-100 to-surface-200 flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800 text-sm line-clamp-2 mb-1 leading-tight group-hover:text-primary-600 transition-colors",children:r.title}),e.jsxs("span",{className:"text-base font-bold text-primary-600",children:["â‚¦",r.price.toLocaleString()]}),r.store&&e.jsx("p",{className:"text-[11px] text-gray-400 mt-1",children:r.store.name})]})]})})}function C(){const[r,a]=j(),[t,n]=i.useState(r.get("q")||""),[c,h]=i.useState(!1),{searchResults:o,searchProducts:f,clearSearchResults:d}=v(),l=i.useRef(null),p=["Food","Electronics","Books","Fashion","Services","Accommodation"];i.useEffect(()=>{var u;(u=l.current)==null||u.focus();const s=r.get("q");return s&&m(s),()=>d()},[]);const m=async s=>{if(s.trim()){h(!0),a({q:s});try{await f(s)}finally{h(!1)}}},g=s=>{s.preventDefault(),m(t)};return e.jsxs("div",{className:"min-h-screen bg-surface-50",children:[e.jsx("div",{className:"sticky top-0 glass border-b border-surface-200/60 px-4 py-3 z-10",children:e.jsxs("form",{onSubmit:g,className:"flex items-center gap-3",children:[e.jsx(x,{to:"/",className:"p-2 -ml-2 text-gray-600 hover:text-gray-900 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{ref:l,type:"search",value:t,onChange:s=>n(s.target.value),placeholder:"Search products, stores...",className:"w-full bg-surface-100 rounded-2xl pl-11 pr-4 py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-400/30 font-medium text-sm border border-surface-200"}),e.jsx("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),t&&e.jsx("button",{type:"button",onClick:()=>{var s;n(""),d(),a({}),(s=l.current)==null||s.focus()},className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx(b,{position:"search_banner"}),!t&&!o.length&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Popular Searches"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(s=>e.jsx("button",{onClick:()=>{n(s),m(s)},className:"px-4 py-2 bg-white border border-surface-200 rounded-full text-sm text-gray-600 font-medium hover:bg-primary-50 hover:border-primary-300 hover:text-primary-600 transition-colors shadow-sm",children:s},s))})]}),c&&e.jsx("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[1,2,3,4].map(s=>e.jsx(y,{},s))}),!c&&o.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-4 font-medium",children:["Found ",o.length," result",o.length!==1?"s":"",' for "',r.get("q"),'"']}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.map(s=>e.jsx(N,{product:s},s.id))})]}),!c&&t&&o.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-surface-100 rounded-2xl flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Try a different search term"}),e.jsx("button",{onClick:()=>{var s;n(""),d(),a({}),(s=l.current)==null||s.focus()},className:"btn-secondary",children:"Clear Search"})]})]})]})}export{C as default};
