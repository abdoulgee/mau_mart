import{r as i,a as q,f as x,j as e,L as F}from"./index-BxsvggaG.js";import{a as v}from"./Skeleton-BiEkAveh.js";const c={home_featured:{icon:"ðŸ ",label:"Home Page Featured",desc:"Top visibility on home page"},category_top:{icon:"ðŸ“‚",label:"Category Top",desc:"First in category results"},search_boost:{icon:"ðŸ”",label:"Search Boost",desc:"Prioritized in search"}},T={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-600"};function B(){var y;const[p,w]=i.useState({}),[S,_]=i.useState([]),[h,L]=i.useState([]),[k,C]=i.useState(!0),[R,n]=i.useState(!1),[g,b]=i.useState(!1),[r,d]=i.useState({product_id:"",listing_type:"home_featured",payment_reference:""}),{addToast:o}=q();i.useEffect(()=>{j()},[]);const j=async()=>{try{const[s,t,a]=await Promise.all([x.get("/api/v1/subscriptions/featured/prices"),x.get("/api/v1/products/my-products"),x.get("/api/v1/subscriptions/featured/my-listings")]);w(s.data.prices),_(t.data.products||[]),L(a.data.listings||[])}catch{o({type:"error",message:"Failed to load data"})}finally{C(!1)}},P=async s=>{var t,a;if(s.preventDefault(),!r.product_id||!r.payment_reference){o({type:"error",message:"Please fill all fields"});return}b(!0);try{await x.post("/api/v1/subscriptions/featured/request",r),o({type:"success",message:"Featured listing request submitted!"}),n(!1),d({product_id:"",listing_type:"home_featured",payment_reference:""}),j()}catch(l){o({type:"error",message:((a=(t=l.response)==null?void 0:t.data)==null?void 0:a.message)||"Request failed"})}finally{b(!1)}};if(k)return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4",children:[e.jsx(v,{className:"h-8 w-48 mb-6"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(v,{className:"h-32 rounded-2xl"},s))})]});const u=p[r.listing_type];return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 px-4 py-3 flex items-center justify-between z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{to:"/seller/subscription",className:"p-2 -ml-2 text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-lg font-semibold",children:"Featured Listings"})]}),e.jsx("button",{onClick:()=>n(!0),className:"btn-primary text-sm py-2 px-4",children:"+ New Request"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-500 mb-3",children:"PRICING OPTIONS"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.entries(p).map(([s,t])=>{var a,l;return e.jsxs("div",{className:"p-3 bg-white rounded-xl border border-gray-100 text-center",children:[e.jsx("span",{className:"text-2xl",children:(a=c[s])==null?void 0:a.icon}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(l=c[s])==null?void 0:l.label}),e.jsxs("p",{className:"text-sm font-bold text-primary-600",children:["â‚¦",t.price.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[t.duration_days," days"]})]},s)})})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-500 mb-3",children:"MY REQUESTS"}),h.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("span",{className:"text-4xl block mb-4",children:"â­"}),e.jsx("p",{children:"No featured listing requests yet"}),e.jsx("p",{className:"text-sm",children:"Boost your products with featured listings"})]}):e.jsx("div",{className:"space-y-3",children:h.map(s=>{var t,a,l,m,f,N;return e.jsxs("div",{className:"p-4 bg-white rounded-2xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:(t=c[s.listing_type])==null?void 0:t.icon}),e.jsx("span",{className:"text-sm font-medium",children:(a=c[s.listing_type])==null?void 0:a.label})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T[s.status]}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),s.product&&e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-200 overflow-hidden",children:(m=(l=s.product.media)==null?void 0:l[0])!=null&&m.url?e.jsx("img",{src:s.product.media[0].url,alt:"",className:"w-full h-full object-cover"}):"ðŸ“¦"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.product.title}),e.jsxs("p",{className:"text-xs text-primary-600",children:["â‚¦",(f=s.product.price)==null?void 0:f.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex justify-between mt-3 text-xs text-gray-500",children:[e.jsxs("span",{children:["Amount: â‚¦",(N=s.amount_paid)==null?void 0:N.toLocaleString()]}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]})]},s.id)})})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end z-50",onClick:()=>n(!1),children:e.jsxs("div",{className:"w-full bg-white rounded-t-3xl p-6 max-h-[80vh] overflow-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Request Featured Listing"}),e.jsx("button",{onClick:()=>n(!1),className:"p-2 text-gray-400",children:"âœ•"})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Product"}),e.jsxs("select",{value:r.product_id,onChange:s=>d({...r,product_id:s.target.value}),className:"input",required:!0,children:[e.jsx("option",{value:"",children:"Choose a product"}),S.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Listing Type"}),e.jsx("div",{className:"space-y-2",children:Object.entries(c).map(([s,t])=>{var a,l;return e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer ${r.listing_type===s?"border-primary-500 bg-primary-50":"border-gray-100"}`,children:[e.jsx("input",{type:"radio",name:"listing_type",value:s,checked:r.listing_type===s,onChange:m=>d({...r,listing_type:m.target.value}),className:"hidden"}),e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:t.label}),e.jsx("p",{className:"text-sm text-gray-500",children:t.desc})]}),e.jsxs("span",{className:"font-bold text-primary-600",children:["â‚¦",(l=(a=p[s])==null?void 0:a.price)==null?void 0:l.toLocaleString()]})]},s)})})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-xl",children:[e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Payment Required:"})," Transfer â‚¦",(y=u==null?void 0:u.price)==null?void 0:y.toLocaleString()," to:"]}),e.jsxs("p",{className:"text-sm font-medium mt-2",children:["Bank: GTBank",e.jsx("br",{}),"Account: 0123456789",e.jsx("br",{}),"Name: MAU MART"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Reference"}),e.jsx("input",{type:"text",value:r.payment_reference,onChange:s=>d({...r,payment_reference:s.target.value}),placeholder:"Enter transaction reference",className:"input",required:!0})]}),e.jsx("button",{type:"submit",disabled:g,className:"btn-primary w-full disabled:opacity-50",children:g?"Submitting...":"Submit Request"})]})]})})]})}export{B as default};
