import{b as f,r as n,f as j,j as e,L as o}from"./index-BxsvggaG.js";import{H as b}from"./Header-DUNe79n9.js";import{a as c}from"./Skeleton-BiEkAveh.js";const g={pending_payment:"bg-amber-100 text-amber-700",awaiting_approval:"bg-blue-100 text-blue-700",approved:"bg-emerald-100 text-emerald-700",rejected:"bg-red-100 text-red-700",completed:"bg-gray-100 text-gray-700",cancelled:"bg-gray-100 text-gray-500"},v={pending_payment:"Pending Payment",awaiting_approval:"Awaiting Approval",approved:"Approved",rejected:"Rejected",completed:"Completed",cancelled:"Cancelled"};function y({order:t}){var r,l,i;const a=t.product;return e.jsx(o,{to:`/order/${t.id}`,className:"card-hover block",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl bg-surface-100 overflow-hidden flex-shrink-0",children:(l=(r=a==null?void 0:a.media)==null?void 0:r[0])!=null&&l.url?e.jsx("img",{src:a.media[0].url,alt:a.title,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm line-clamp-1",children:(a==null?void 0:a.title)||"Product"}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full flex-shrink-0 ml-2 font-semibold ${g[t.status]}`,children:v[t.status]})]}),e.jsxs("p",{className:"text-xs text-gray-400 mb-2",children:["Order #",t.order_number]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-primary-600 font-bold text-sm",children:["â‚¦",(i=t.total_price)==null?void 0:i.toLocaleString()]}),e.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(t.created_at).toLocaleDateString()})]})]})]})})}function L(){const{isAuthenticated:t}=f(),[a,r]=n.useState([]),[l,i]=n.useState(!0),[d,x]=n.useState("all");n.useEffect(()=>{t&&p()},[t]);const p=async()=>{try{const s=await j.get("/api/v1/orders");r(s.data.orders||[])}catch(s){console.error("Failed to fetch orders:",s)}finally{i(!1)}},m=d==="all"?a:a.filter(s=>s.status===d);if(!t)return e.jsx("div",{className:"min-h-screen bg-surface-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-surface-100 rounded-2xl flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Login Required"}),e.jsx("p",{className:"text-gray-500 mb-6 text-sm",children:"Please login to view your orders"}),e.jsx(o,{to:"/login",className:"btn-primary px-8",children:"Login"})]})});const h=[{id:"all",label:"All"},{id:"pending_payment",label:"Pending"},{id:"awaiting_approval",label:"Processing"},{id:"approved",label:"Approved"},{id:"completed",label:"Completed"}];return e.jsxs("div",{className:"min-h-screen bg-surface-50 pb-20",children:[e.jsx(b,{title:"My Orders",showBack:!0}),e.jsx("div",{className:"bg-white border-b border-surface-200/60 px-4",children:e.jsx("div",{className:"flex gap-1 overflow-x-auto scrollbar-hide -mx-4 px-4",children:h.map(s=>e.jsx("button",{onClick:()=>x(s.id),className:`px-4 py-3 text-xs font-semibold whitespace-nowrap border-b-2 transition-colors ${d===s.id?"border-primary-500 text-primary-600":"border-transparent text-gray-400 hover:text-gray-600"}`,children:s.label},s.id))})}),e.jsx("div",{className:"p-4 space-y-3",children:l?Array.from({length:3}).map((s,u)=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{className:"w-20 h-20 rounded-xl"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(c,{className:"h-4 w-3/4 mb-2"}),e.jsx(c,{className:"h-3 w-1/2 mb-2"}),e.jsx(c,{className:"h-4 w-1/3"})]})]})},u)):m.length>0?m.map(s=>e.jsx(y,{order:s},s.id)):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-surface-100 rounded-2xl flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2",children:"No orders yet"}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Start shopping to see your orders here"}),e.jsx(o,{to:"/",className:"btn-primary px-6",children:"Browse Products"})]})})]})}export{L as default};
