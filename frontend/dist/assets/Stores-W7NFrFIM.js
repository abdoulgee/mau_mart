import{r,a as w,f as o,j as e,L as _}from"./index-BxsvggaG.js";import{a as k}from"./Skeleton-BiEkAveh.js";function $(){const[m,f]=r.useState([]),[y,p]=r.useState(!0),[l,g]=r.useState(1),[n,j]=r.useState({}),[c,N]=r.useState(""),[b,h]=r.useState(null),{addToast:i}=w(),v=({store:s,onClose:t})=>{var d;if(!s)return null;const a=s.owner||{};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[100]",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg overflow-hidden animate-scale-up",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between bg-gray-50",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Store Details"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 p-2",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gray-100 flex items-center justify-center overflow-hidden border",children:s.logo_url?e.jsx("img",{src:s.logo_url,alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-4xl",children:"ðŸª"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:s.name}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.is_active?"Active":"Suspended"}),s.is_verified&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium flex items-center gap-1",children:"âœ“ Verified"})]})]})]}),e.jsxs("div",{className:"bg-primary-50 rounded-2xl p-5 border border-primary-100",children:[e.jsx("h4",{className:"text-sm font-bold text-primary-700 uppercase tracking-wider mb-4",children:"Owner Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-primary-600/70 font-semibold",children:"Full Name"}),e.jsxs("p",{className:"text-gray-900 font-bold",children:[a.first_name," ",a.last_name]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-primary-600/70 font-semibold",children:"Student ID"}),e.jsx("p",{className:"text-gray-900 font-bold",children:a.student_id||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-primary-600/70 font-semibold",children:"Phone Number"}),e.jsx("p",{className:"text-gray-900 font-bold",children:a.phone||s.phone||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-primary-600/70 font-semibold",children:"Email Address"}),e.jsx("p",{className:"text-gray-900 font-bold break-all",children:a.email||s.email||"N/A"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.total_products||0}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-semibold",children:"Products"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl",children:[e.jsxs("p",{className:"text-xl font-bold text-gray-900 text-yellow-500",children:["â­ ",((d=s.rating)==null?void 0:d.toFixed(1))||"0.0"]}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-semibold",children:"Rating"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.total_orders||0}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-semibold",children:"Orders"})]})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx("button",{onClick:()=>{u(s.id,s.is_active),t()},className:`flex-1 py-3 rounded-xl font-bold transition-all ${s.is_active?"bg-red-50 text-red-600 hover:bg-red-100 border border-red-200":"bg-green-50 text-green-600 hover:bg-green-100 border border-green-200"}`,children:s.is_active?"Suspend Store":"Activate Store"}),e.jsx("button",{onClick:t,className:"flex-1 py-3 bg-gray-100 text-gray-600 rounded-xl font-bold hover:bg-gray-200 transition-all",children:"Close"})]})]})]})})};r.useEffect(()=>{x()},[l,c]);const x=async()=>{p(!0);try{const s=await o.get("/api/v1/stores",{params:{page:l,limit:20,search:c}});f(s.data.stores||[]),j(s.data.pagination||{})}catch{i({type:"error",message:"Failed to load stores"})}finally{p(!1)}},S=async(s,t)=>{try{await o.patch(`/api/v1/admin/stores/${s}`,{is_verified:!t}),i({type:"success",message:t?"Verification removed":"Store verified!"}),x()}catch{i({type:"error",message:"Failed to update store"})}},u=async(s,t)=>{try{await o.patch(`/api/v1/admin/stores/${s}`,{is_active:!t}),i({type:"success",message:t?"Store suspended":"Store activated"}),x()}catch{i({type:"error",message:"Failed to update store"})}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Stores"}),e.jsx("input",{type:"search",value:c,onChange:s=>N(s.target.value),placeholder:"Search stores...",className:"px-4 py-2 border border-gray-200 rounded-xl"})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Store"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Owner"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Type"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Products"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Rating"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Status"}),e.jsx("th",{className:"text-right p-4 text-sm font-medium text-gray-500",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:y?Array.from({length:5}).map((s,t)=>e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-4",children:e.jsx(k,{className:"h-14 w-full"})})},t)):m.length>0?m.map(s=>{var t,a,d;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden flex items-center justify-center",children:s.logo_url?e.jsx("img",{src:s.logo_url,alt:"",className:"w-full h-full object-cover"}):"ðŸª"}),e.jsx("div",{className:"flex-1 cursor-pointer group",onClick:()=>h(s),children:e.jsxs("p",{className:"font-medium text-gray-900 flex items-center gap-1 group-hover:text-primary-600 transition-colors group-hover:underline",children:[s.name,s.is_verified&&e.jsx("span",{className:"text-blue-500",children:"âœ“"})]})})]})}),e.jsxs("td",{className:"p-4 text-gray-600",children:[(t=s.owner)==null?void 0:t.first_name," ",(a=s.owner)==null?void 0:a.last_name]}),e.jsx("td",{className:"p-4 text-gray-600 capitalize",children:s.store_type}),e.jsx("td",{className:"p-4 text-gray-600",children:s.total_products||0}),e.jsxs("td",{className:"p-4",children:[e.jsx("span",{className:"text-yellow-400",children:"â­"})," ",((d=s.rating)==null?void 0:d.toFixed(1))||"0.0"]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.is_active?"Active":"Suspended"})}),e.jsxs("td",{className:"p-4 text-right space-x-2",children:[e.jsx("button",{onClick:()=>S(s.id,s.is_verified),className:`text-xs px-3 py-1 rounded-lg ${s.is_verified?"bg-blue-50 text-blue-600":"bg-gray-50 text-gray-600"}`,children:s.is_verified?"âœ“ Verified":"Verify"}),e.jsx("button",{onClick:()=>u(s.id,s.is_active),className:`text-xs px-3 py-1 rounded-lg ${s.is_active?"bg-red-50 text-red-600":"bg-green-50 text-green-600"}`,children:s.is_active?"Suspend":"Activate"}),e.jsx(_,{to:`/store/${s.id}`,className:"text-xs px-3 py-1 bg-gray-50 text-gray-600 rounded-lg",children:"View"})]})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:"No stores found"})})})]})})}),n.pages>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>g(s=>Math.max(1,s-1)),disabled:l===1,className:"px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"text-gray-600",children:["Page ",l," of ",n.pages]}),e.jsx("button",{onClick:()=>g(s=>Math.min(n.pages,s+1)),disabled:l===n.pages,className:"px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50",children:"Next"})]}),e.jsx(v,{store:b,onClose:()=>h(null)})]})}export{$ as default};
