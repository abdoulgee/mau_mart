import{r as a,a as v,f as x,j as e,L as w}from"./index-BxsvggaG.js";import{a as S}from"./Skeleton-BiEkAveh.js";function _(){const[o,p]=a.useState([]),[y,m]=a.useState(!0),[r,u]=a.useState(1),[c,f]=a.useState({}),[d,j]=a.useState(""),{addToast:l}=v();a.useEffect(()=>{i()},[r,d]);const i=async()=>{m(!0);try{const t=await x.get("/api/v1/products",{params:{page:r,limit:20,search:d}});p(t.data.products||[]),f(t.data.pagination||{})}catch{l({type:"error",message:"Failed to load products"})}finally{m(!1)}},N=async(t,s)=>{try{await x.patch(`/api/v1/admin/products/${t}`,{is_featured:!s}),l({type:"success",message:s?"Removed from featured":"Added to featured"}),i()}catch{l({type:"error",message:"Failed to update product"})}},b=async t=>{if(confirm("Delete this product?"))try{await x.delete(`/api/v1/products/${t}`),l({type:"success",message:"Product deleted"}),i()}catch{l({type:"error",message:"Failed to delete product"})}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),e.jsx("input",{type:"search",value:d,onChange:t=>j(t.target.value),placeholder:"Search products...",className:"px-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Product"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Store"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Price"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Stock"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Status"}),e.jsx("th",{className:"text-right p-4 text-sm font-medium text-gray-500",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:y?Array.from({length:5}).map((t,s)=>e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-4",children:e.jsx(S,{className:"h-16 w-full"})})},s)):o.length>0?o.map(t=>{var s,n,g,h;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-100 overflow-hidden",children:(n=(s=t.media)==null?void 0:s[0])!=null&&n.url?e.jsx("img",{src:t.media[0].url,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"ðŸ“¦"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 line-clamp-1",children:t.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",t.id]})]})]})}),e.jsx("td",{className:"p-4 text-gray-600",children:((g=t.store)==null?void 0:g.name)||"-"}),e.jsxs("td",{className:"p-4 font-medium",children:["â‚¦",(h=t.price)==null?void 0:h.toLocaleString()]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.stock_quantity>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t.stock_quantity>0?`${t.stock_quantity} in stock`:"Out of stock"})}),e.jsxs("td",{className:"p-4",children:[t.is_featured&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs mr-1",children:"Featured"}),t.is_active?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:"Active"}):e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:"Inactive"})]}),e.jsxs("td",{className:"p-4 text-right space-x-2",children:[e.jsx("button",{onClick:()=>N(t.id,t.is_featured),className:`text-xs px-3 py-1 rounded-lg ${t.is_featured?"bg-yellow-50 text-yellow-600":"bg-gray-50 text-gray-600"}`,children:t.is_featured?"â˜… Featured":"â˜† Feature"}),e.jsx(w,{to:`/product/${t.id}`,className:"text-xs px-3 py-1 bg-blue-50 text-blue-600 rounded-lg",children:"View"}),e.jsx("button",{onClick:()=>b(t.id),className:"text-xs px-3 py-1 bg-red-50 text-red-600 rounded-lg",children:"Delete"})]})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"No products found"})})})]})})}),c.pages>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>u(t=>Math.max(1,t-1)),disabled:r===1,className:"px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"text-gray-600",children:["Page ",r," of ",c.pages]}),e.jsx("button",{onClick:()=>u(t=>Math.min(c.pages,t+1)),disabled:r===c.pages,className:"px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50",children:"Next"})]})]})}export{_ as default};
