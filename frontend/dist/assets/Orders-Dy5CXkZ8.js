import{r as s,a as _,f as O,j as e}from"./index-BxsvggaG.js";import{a as C}from"./Skeleton-BiEkAveh.js";const P={pending_payment:"bg-yellow-100 text-yellow-700",awaiting_approval:"bg-blue-100 text-blue-700",approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700",completed:"bg-gray-100 text-gray-700",cancelled:"bg-gray-100 text-gray-500"};function D(){const[n,y]=s.useState([]),[j,d]=s.useState(!0),[l,i]=s.useState(1),[r,N]=s.useState({}),[c,b]=s.useState("all"),{addToast:v}=_();s.useEffect(()=>{w()},[l,c]);const w=async()=>{d(!0);try{const t={page:l,limit:20};c!=="all"&&(t.status=c);const a=await O.get("/api/v1/admin/orders",{params:t});y(a.data.orders||[]),N(a.data.pagination||{})}catch{v({type:"error",message:"Failed to load orders"})}finally{d(!1)}},S=["all","pending_payment","awaiting_approval","approved","completed","rejected","cancelled"];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Orders"}),e.jsx("select",{value:c,onChange:t=>b(t.target.value),className:"px-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500",children:S.map(t=>e.jsx("option",{value:t,children:t==="all"?"All Orders":t.replace("_"," ").replace(/\b\w/g,a=>a.toUpperCase())},t))})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Order #"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Buyer"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Seller"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Product"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Total"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Status"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y",children:j?Array.from({length:5}).map((t,a)=>e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-4",children:e.jsx(C,{className:"h-12 w-full"})})},a)):n.length>0?n.map(t=>{var a,x,o,m,p,g,u,h,f;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-4 font-medium text-gray-900",children:t.order_number}),e.jsxs("td",{className:"p-4 text-gray-600",children:[(a=t.buyer)==null?void 0:a.first_name," ",(x=t.buyer)==null?void 0:x.last_name]}),e.jsx("td",{className:"p-4 text-gray-600",children:((o=t.store)==null?void 0:o.name)||"-"}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-gray-100 overflow-hidden",children:(g=(p=(m=t.product)==null?void 0:m.media)==null?void 0:p[0])!=null&&g.url?e.jsx("img",{src:t.product.media[0].url,alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-xs flex items-center justify-center h-full",children:"ðŸ“¦"})}),e.jsx("span",{className:"text-sm line-clamp-1",children:(u=t.product)==null?void 0:u.title})]})}),e.jsxs("td",{className:"p-4 font-medium",children:["â‚¦",(h=t.total_price)==null?void 0:h.toLocaleString()]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${P[t.status]||"bg-gray-100 text-gray-600"}`,children:(f=t.status)==null?void 0:f.replace("_"," ")})}),e.jsx("td",{className:"p-4 text-gray-500 text-sm",children:new Date(t.created_at).toLocaleDateString()})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:"No orders found"})})})]})})}),r.pages>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>i(t=>Math.max(1,t-1)),disabled:l===1,className:"px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"text-gray-600",children:["Page ",l," of ",r.pages]}),e.jsx("button",{onClick:()=>i(t=>Math.min(r.pages,t+1)),disabled:l===r.pages,className:"px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50",children:"Next"})]})]})}export{D as default};
