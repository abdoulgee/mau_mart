import{u as b,r as n,a as N,j as e,f as m}from"./index-BxsvggaG.js";import{a as v}from"./Skeleton-BiEkAveh.js";function S(){const{categories:x,loading:u,fetchCategories:i,connectSocket:h}=b(),[g,l]=n.useState(!1),[c,d]=n.useState(null),[s,a]=n.useState({name:"",description:"",icon:""}),{addToast:r}=N();n.useEffect(()=>{h(),i(!0)},[]);const p=async t=>{t.preventDefault();try{c?(await m.put(`/api/v1/admin/categories/${c.id}`,s),r({type:"success",message:"Category updated!"})):(await m.post("/api/v1/admin/categories",s),r({type:"success",message:"Category created!"})),l(!1),a({name:"",description:"",icon:""}),d(null),i(!0)}catch{r({type:"error",message:"Failed to save category"})}},y=t=>{d(t),a({name:t.name,description:t.description||"",icon:t.icon||""}),l(!0)},f=async t=>{if(confirm("Delete this category?"))try{await m.delete(`/api/v1/admin/categories/${t}`),r({type:"success",message:"Category deleted"}),i(!0)}catch{r({type:"error",message:"Failed to delete category"})}},j=["ðŸ”","ðŸ“±","ðŸ‘—","ðŸ“š","ðŸ› ï¸","ðŸ ","âš½","ðŸ’Š","ðŸŽ®","ðŸŽ¨","ðŸš—","ðŸ’¼"];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Categories"}),e.jsx("button",{onClick:()=>{d(null),a({name:"",description:"",icon:"ðŸ“¦"}),l(!0)},className:"btn-primary",children:"+ Add Category"})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Icon"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Name"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Slug"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium text-gray-500",children:"Products"}),e.jsx("th",{className:"text-right p-4 text-sm font-medium text-gray-500",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:u?Array.from({length:5}).map((t,o)=>e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-4",children:e.jsx(v,{className:"h-10 w-full"})})},o)):x.length>0?x.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-4 text-2xl",children:t.icon||"ðŸ“¦"}),e.jsx("td",{className:"p-4 font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"p-4 text-gray-500",children:t.slug}),e.jsx("td",{className:"p-4 text-gray-600",children:t.product_count||0}),e.jsxs("td",{className:"p-4 text-right space-x-2",children:[e.jsx("button",{onClick:()=>y(t),className:"text-sm px-3 py-1 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100",children:"Edit"}),e.jsx("button",{onClick:()=>f(t.id),className:"text-sm px-3 py-1 bg-red-50 text-red-600 rounded-lg hover:bg-red-100",children:"Delete"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"No categories found"})})})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:c?"Edit Category":"Add Category"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>a({...s,name:t.target.value}),className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:t=>a({...s,description:t.target.value}),className:"input",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(t=>e.jsx("button",{type:"button",onClick:()=>a({...s,icon:t}),className:`w-10 h-10 rounded-lg text-xl ${s.icon===t?"bg-primary-100 ring-2 ring-primary-500":"bg-gray-100 hover:bg-gray-200"}`,children:t},t))})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"btn-secondary flex-1",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Save"})]})]})]})})]})}export{S as default};
