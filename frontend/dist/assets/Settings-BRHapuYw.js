import{l as N,r,a as v,f as x,j as e}from"./index-BxsvggaG.js";function S(){const{settings:_,fetchSettings:u}=N(),[s,c]=r.useState({site_name:"MAU MART",site_tagline:"Campus Marketplace",support_email:"",support_phone:"",currency:"NGN",currency_symbol:"â‚¦",transaction_fee_percent:0,min_order_amount:0,max_product_images:4,require_email_verification:!0,allow_guest_browsing:!0,maintenance_mode:!1,terms_url:"",privacy_url:""}),[p,h]=r.useState(!0),[m,d]=r.useState(!1),{addToast:o}=v();r.useEffect(()=>{g()},[]);const g=async()=>{try{const t=await x.get("/api/v1/admin/settings");t.data.settings&&Object.keys(t.data.settings).length>0&&c(n=>({...n,...t.data.settings}))}catch{}finally{h(!1)}},a=t=>{const{name:n,value:i,type:l,checked:b}=t.target;c(j=>({...j,[n]:l==="checkbox"?b:l==="number"?parseFloat(i):i}))},y=async t=>{var n,i;t.preventDefault(),d(!0);try{await x.post("/api/v1/admin/settings",s),o({type:"success",message:"Settings saved!"}),u()}catch(l){o({type:"error",message:((i=(n=l.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to save settings"})}finally{d(!1)}};return p?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"animate-pulse bg-gray-200 h-96 rounded-xl"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Site Settings"}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Branding"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site Name"}),e.jsx("input",{type:"text",name:"site_name",value:s.site_name,onChange:a,className:"input"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Shows in header, login, signup, and receipts"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tagline"}),e.jsx("input",{type:"text",name:"site_tagline",value:s.site_tagline,onChange:a,className:"input"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Support Email"}),e.jsx("input",{type:"email",name:"support_email",value:s.support_email,onChange:a,className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Support Phone"}),e.jsx("input",{type:"tel",name:"support_phone",value:s.support_phone,onChange:a,className:"input"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Currency & Fees"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{name:"currency",value:s.currency,onChange:a,className:"input",children:[e.jsx("option",{value:"NGN",children:"Nigerian Naira (NGN)"}),e.jsx("option",{value:"USD",children:"US Dollar (USD)"}),e.jsx("option",{value:"GHS",children:"Ghanaian Cedi (GHS)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency Symbol"}),e.jsx("input",{type:"text",name:"currency_symbol",value:s.currency_symbol,onChange:a,className:"input"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Used in all price displays across the app"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Fee (%)"}),e.jsx("input",{type:"number",name:"transaction_fee_percent",value:s.transaction_fee_percent,onChange:a,className:"input",min:"0",max:"100",step:"0.1"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Limits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Order Amount"}),e.jsx("input",{type:"number",name:"min_order_amount",value:s.min_order_amount,onChange:a,className:"input",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Product Images"}),e.jsx("input",{type:"number",name:"max_product_images",value:s.max_product_images,onChange:a,className:"input",min:"1",max:"10"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Features"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"require_email_verification",checked:s.require_email_verification,onChange:a,className:"w-4 h-4 rounded text-primary-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-700",children:"Require email verification for new users"}),e.jsx("p",{className:"text-xs text-gray-400",children:"When disabled, new users can log in immediately without email OTP"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"allow_guest_browsing",checked:s.allow_guest_browsing,onChange:a,className:"w-4 h-4 rounded text-primary-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-700",children:"Allow guest browsing without login"}),e.jsx("p",{className:"text-xs text-gray-400",children:"When disabled, users must log in to browse products"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("input",{type:"checkbox",name:"maintenance_mode",checked:s.maintenance_mode,onChange:a,className:"w-4 h-4 rounded text-yellow-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-yellow-800 font-medium",children:"Maintenance Mode"}),e.jsx("p",{className:"text-xs text-yellow-600",children:"All non-admin API requests will return 503. Users will see a maintenance page."})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Legal Pages"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Terms of Service URL"}),e.jsx("input",{type:"url",name:"terms_url",value:s.terms_url,onChange:a,className:"input",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Privacy Policy URL"}),e.jsx("input",{type:"url",name:"privacy_url",value:s.privacy_url,onChange:a,className:"input",placeholder:"https://..."})]})]})]}),e.jsx("button",{type:"submit",disabled:m,className:"btn-primary disabled:opacity-50",children:m?"Saving...":"Save Settings"})]})]})}export{S as default};
